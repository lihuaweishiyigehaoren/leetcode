### 字节跳动问题

### C++

#### static/extern/inline关键字详解

1.static 

全局变量与静态全局变量的区别

全局变量前面加上static就是静态全局变量.全局变量和静态全局变量都是静态存储方式.两者的主要区别是**非静态全局变量的作用域是整个源程序,当一个源程序由多个源文件组成时,非静态的全局变量在各个源文件中都是有效的.**  而**静态全局变量则限制其作用域,只在定义该变量的源文件内有效,在同一源程序的其他源文件中不能使用.**

总结:**把局部变量改变为静态变量后是改变了它的存储方式,即改变了它的生存期.把全局变量改变为静态变量后是改变了它的作用域,限制了它的使用范围**



普通函数和静态函数

static函数与普通函数**作用域不同**,静态函数只在本文件,只有在**当前源文件中使用的函数应该说明为内部函数(static),静态函数应该在当前文件中说明和定义.**对于可在当前源文件以外使用的函数,应该在一个头文件中声明,要使用这些函数的源文件要包含这个头文件.



static全局变量和普通的全局变量区别

static全局变量只初始化一次,防止在其他文件单元中被引用



static局部变量和普通局部变量区别

static局部变量只被初始化一次,下一次依据上一次的结果值



static函数与普通函数区别

static函数在内存中只有一份,普通函数在每个调用中维持一份拷贝



2.extern 外编译

extern全局变量(用extern修饰的变量只是说明**该变量在其他地方定义**，所以在其他地方一定要用明确的定义如int a，并且不能用static修饰）、**static全局变量和static局部变量的生存期都是“永久”，区别只是可见域不同。extern全局变量可见区域是工程，static全局变量可见区域是文件，而static局部变量的可见区域是块**。

从代码维护角度来看，对extern变量的修改可能会影响所有代码，对static全局变量的修改可能影响一个文件中的代码，而对static变量的修改可能影响一个块的代码；因此在选择变量类型时，优先级是static局部>static全局>extern全局。但它们有着共同的缺点：使用了这些类型变量的函数将是不可重入的，不是线程安全的。在C/C++标准库中有很多函数都使用了static局部变量，目前的实现中都为它们提供了两套代码，单线程版本使用static变量而多线程版本使用“线程全局变量”，比如rand,strtok等。



**函数默认的修饰是extren,static把它声明为内部函数**



3.inline

优点:简单的说,内联函数直接将**函数替换到调用的位置**,这样可以大大的省掉调用函数的性能损失

缺点:程序体积变大,不利于动态升级,不利于调试



#### 智能指针问题?

auto_ptr 控制复制,赋值,构造,析构,解引用 转移对象所有权

后面还有引用计数的一些实现细节

https://blog.csdn.net/albertsh/article/details/82286999



#### 类成员变量的声明顺序和初始化顺序

#### 讲讲C++多态(封装,继承)

通过继承，一个类可以被当作不止一个数据类型（type）使用，它可以被用做自身代表的数据类型（这是最常用的），还可以被当作它的任意基类所代表的数据类型，乃至任意接口类型--前提是这个类实现了这个接口。这一机制称为"多态"

#### 讲讲C++的内存布局

1.类成员变量的声明顺序和初始化顺序

2.普通成员变量按照声明顺序存放,内存对齐,较晚出现的成员在class对象中有较高的地址

3.讲讲静态成员函数 在data segment ,.bss区域

4.虚函数表指针

#### 虚函数表存了什么信息

1.type_info for Point(类)最前面

2.虚函数

 // 父类指向子类(对象) 会发生切割行为

#### 出现菱形继承虚继承时C++对象内存布局 ,sizeof这个类的结果是多少

虚继承只有一个实例

#### 一个C++程序执行main函数前和执行完main函数后发生什么

总结：
[main函数](https://www.baidu.com/s?wd=main%E5%87%BD%E6%95%B0&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)执行之前，主要就是[初始化](https://www.baidu.com/s?wd=%E5%88%9D%E5%A7%8B%E5%8C%96&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)系统相关资源：
1.设置栈指针
2.[初始化](https://www.baidu.com/s?wd=%E5%88%9D%E5%A7%8B%E5%8C%96&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)static静态和global全局变量，即data段的内容  // data段落
3.将未[初始化](https://www.baidu.com/s?wd=%E5%88%9D%E5%A7%8B%E5%8C%96&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)部分的赋初值：数值型short，int，long等为0，bool为FALSE，指针为NULL，等等，即.[bss段](https://www.baidu.com/s?wd=bss%E6%AE%B5&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)的内容
4.运行全局构造器，估计是[C++](https://www.baidu.com/s?wd=C%2B%2B&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)中[构造函数](https://www.baidu.com/s?wd=%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)之类的吧
5.将[main函数](https://www.baidu.com/s?wd=main%E5%87%BD%E6%95%B0&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)的参数，argc，argv等传递给[main函数](https://www.baidu.com/s?wd=main%E5%87%BD%E6%95%B0&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)，然后才真正运行main函数

main 函数之后会执行相反的工作。

#### do{}while(0)为什么要这样

https://www.jianshu.com/p/99efda8dfec9

作用:

1.宏定义时,如果是多个语句的宏,在展开的时候可能会出错

2.可以避免goto语句,异常时退出循环即可

3.避免空宏引起的警告

4.可以定义单一函数快速完成特定操作,且其间局部变量名不影响其他



### 操作系统

#### 操作系统的一些调度算法

多任务系统划分两类:非抢占式任务和抢占式多任务.(进程优先级和时间片)

linux调度算法 : -记住这个-用红黑树存储进程的  **完全公平调度(CFS)**

**实时调度策略** -不用时间片

#### 段 ,页和区的区别

页-内核把物理页作为内存管理的基本单位,尽管处理器的最小寻址单位是字(甚至字节).但是内存管理单元(MMU,管理内存并把虚拟地址转换为物理地址的硬件)通常以页为单位进行处理.正因为如此,MMU以页大小为单位来管理系统中的页表,从虚拟内存的角度而言,页就是最小单位.32位系统通常支持4kb的页,64位一般会支持8kb的页.(摘自12.1)

区-由于硬件的限制,内核并不能对所有的页一视同仁,有些页位于内存中特定的物理地址上,所以不能将其用于一些特定的任务.由于存在这种限制,所以内核把页划分为不同的区,内核使用区对具有相似特征的页进行分组.

直接执行DMA的区,-直接寻址

#### 讲讲进程.线程.协程

#### 讲讲进程和线程切换的时候会发生什么

#### 如果让你实现一个协程库,你会怎么实现

#### 实现一个线程池

#### 讲讲mmap的实现原理

#### 你用C++一般怎么读写文件,在这种方式下,如果你在读写文件时程序挂了,那么会发生什么

#### 用户态内核态

#### 内存.外存,虚拟内存,物理内存.高速缓存

#### 页面置换算法有哪些

#### 操作系统底层的内存分配管理

brk(),sbrk(),mmap(),ptmalloc(),emalloc()(注意区别库函数) 

sbrk是C函数,系统调用brk和mmap,具体根据分配大小加以区分,sbrk调用brk

#### fwrite()调用会刷回磁盘吗?如果成功调用结束程序会刷回吗

不会:缓冲IO,会(面试官讲的,可能题目意思是成功返回,返程就是调用了fclose,主动刷)



### 网络编程

#### TCP的三次握手机制你觉得会出现什么安全上的问题

https://wenku.baidu.com/view/656c5fbcaa00b52acec7ca1a.html

dos攻击 拒绝服务攻击 - 1.伪装虚假ip地址发动攻击 2.拦截客户机应答报文

在TCP三次握手时插入伪造TCP包

#### 对DDos了解吗?讲讲你所知道的DDos攻击方式以及防护措施

https://www.365blogs.com/seoanli/819.html

https://baijiahao.baidu.com/s?id=1609028355233889214&wfr=spider&for=pc

#### 讲讲你所知道的套接字选项

SO_REUSEADDR-端口可重用

TCP_NODELAY-设置1禁用Nagle算法

#### 讲讲select,poll,epoll的实现原理

**https://blog.csdn.net/nanxiaotao/article/details/90612404**

#### http2.0新特性,了解http3.0吗

#### 讲讲https的握手,和http相比,https有什么优缺点

#### 分布式一致性算法

两段提交,三段提交,Paxos,raft,gossip

### 数据结构

####  map怎么实现的?讲讲红黑树的实现原理

#### 了解过跳表吗.rope知道吗



### 数据库

#### B B+树

#### ACID特性

#### 索引



### 算法

#### LRU

#### 链表反转

#### 树的层次遍历

#### 给定一个二叉树,再给定两个节点,求公共LCA

#### 链表快排

#### 给定一棵树,求树上距离为k的节点对的个数,如果多次询问有什么比较好的做法

#### 输入一个数字流,实时的显示当前已输入数字刘的中位数,你会怎么做

#### 最长不重复子串

#### 链表求公共节点

#### 正负数个数相同的数组转成正负交替数组,O(1)空间复杂度

#### 一个不均匀的硬币,正面的概率是p,反面的是1-p,要求出一个对等概率

正反两两一组,不是正反的丢弃,这样每个都是0.5

#### 现在有一个可以随机数1-9的均匀随机函数，要求推到出一个1-7的均匀随机函数

（8，9丢掉，2/9平摊给剩下的7个，再随机，2/9*1/9。。。）（三面被问到如果一直是生成9呢，一直丢弃怎么办？工程和数学不一样，不能做到准精度，只要在N次之后达到可接受的精度就可以做出取舍) 

#### 现在有一个可以随机数1-9的均匀随机函数，要求推到出一个1-13的均匀随机函数

（评论区大佬说的 ，先丢掉9，8个平分成4，4，之后再随机一个数，这样扩展到18，多的同上述，扔掉。）  

#### 有7个球，其中一个不质量不等，有一个天平，找出那个不等的球的比较次数

（最小1次最多3次，33分；22分最少2次最多3次

