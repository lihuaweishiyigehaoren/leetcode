#### B

B树是一种多路搜索树，它的每个节点可以拥有多余两个孩子节点。M路的B树最多能拥有M个孩子节点。

https://mp.weixin.qq.com/s/dUuMiuzxnSt9-TsbmXsuXA

做文件系统比较多

文件系统和数据库的索引都是存在硬盘上的，并且数据量大的话，不一定能一次性加载到内存中。

这时候B树的多路存储威力就出来了，可以每次加载B树的一个节点，然后一步步往下找



高性能服务器开发中的连接：

https://mp.weixin.qq.com/s/xxaxMc_TRIhXKuiSm-QoEg

**重点** ：为什么数据库用B树，树的一个节点对应一个磁盘IO页，每次加载一个节点。降低树的高度



m阶B-Tree满足以下条件：

1、每个节点最多拥有m个子树

2、根节点至少有2个子树

3、分支节点至少拥有m/2颗子树（除根节点和叶子节点外都是分支节点）

4、所有叶子节点都在同一层、每个节点最多可以有m-1个key，并且以升序排列



相同数量的key在B树中生成的节点要远远少于二叉树中的节点，相差的节点数量就等同于磁盘IO的次数。这样到达一定数量后，性能的差异就显现出来了。



 **插入或者删除元素都会导致节点发生裂变反应，有时候会非常麻烦，但正因为如此才让B树能够始终保持多路平衡，这也是B树自身的一个优势：自平衡；B树主要应用于文件系统以及部分数据库索引，如MongoDB，大部分关系型数据库索引则是使用B+树实现。**



#### B+树

**B+Tree是B树的变种，有着比B树更高的查询性能，来看下m阶B+Tree特征：**

**1、**有m个子树的节点包含有m个元素（B-Tree中是m-1）

**2、**根节点和分支节点中不保存数据，只用于索引，所有数据都保存在叶子节点中。

**3、**所有分支节点和根节点都同时存在于子节点中，在子节点元素中是最大或者最小的元素。

**4、**叶子节点会包含所有的关键字，以及指向数据记录的指针，并且叶子节点本身是根据关键字的大小从小到大顺序链接。



高性能服务器：

经典文章：https://mp.weixin.qq.com/s/dUuMiuzxnSt9-TsbmXsuXA



**a、**首先B+树的中间节点不存储卫星数据，所以同样大小的磁盘页可以容纳更多的节点元素，如此一来，相同数量的数据下，B+树就相对来说要更加矮胖些，磁盘IO的次数更少。

**b、**由于只有叶子节点才保存卫星数据，B+树每次查询都要到叶子节点；而B树每次查询则不一样，最好的情况是根节点，最坏的情况是叶子节点，没有B+树稳定。